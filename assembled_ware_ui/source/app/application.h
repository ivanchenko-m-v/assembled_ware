/// ============================================================================
///		Author		: M. Ivanchenko
///		Date create	: 24-05-2016
///		Date update	: 26-05-2016
///		Comment		:
/// ============================================================================
#ifndef __APPLICATION_H__
#define __APPLICATION_H__

#include <QApplication>
#include <QTranslator>

#include "application_params.h"
#include "application_log.h"
#include "business_logic.h"

namespace assembled_ware
{

	class business_logic;
/// ############################################################################
///			class application
/// ############################################################################
	class application : public QApplication
	{
	Q_OBJECT
	/// ========================================================================
	///		CONSTRUCTORS/DESTRUCTOR
	/// ========================================================================
	private:
	/// ------------------------------------------------------------------------
		application( const application &rhs );

	public:
	/// ------------------------------------------------------------------------
		explicit application( int & argc, char ** argv );
	/// ------------------------------------------------------------------------
		~application( );

	/// ========================================================================
	///		PROPERTIES
	/// ========================================================================
	public:
	/// ------------------------------------------------------------------------
		static business_logic& the_business_logic( );
	/// ------------------------------------------------------------------------
		static espira::utils::application_log& the_app_log( );
    /// ------------------------------------------------------------------------
        static application* program_instance( )
        {
            return static_cast<application*>( QApplication::instance( ) );
        }

	/// ========================================================================
	///		FUNCTIONS
	/// ========================================================================
	private:
	/// ------------------------------------------------------------------------
		void initialize( );
	/// ------------------------------------------------------------------------
		void load_translation( );
    /// ------------------------------------------------------------------------
        void load_config( );
    /// ------------------------------------------------------------------------
        void init_logic( );

	public:
    /// ------------------------------------------------------------------------
        void authorize( );

	/// ========================================================================
	///		OPERATORS
	/// ========================================================================
	private:
	/// ------------------------------------------------------------------------
		application& operator=( const application &rhs );

	/// ========================================================================
	///		SLOTS
	/// ========================================================================
	private slots:
    /// ------------------------------------------------------------------------
        void save_config( );

	/// ========================================================================
	///			FIELDS
    /// ========================================================================
    private:
		static bool _is_logic_initialized;

		QTranslator _translator;

        espira::utils::application_params   _params;

	};//class application

//#############################################################################
//-----------------------------------------------------------------------------

}//namespace assembled_ware

#endif // __APPLICATION_H__
